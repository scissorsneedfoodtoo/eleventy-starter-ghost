---
pagination:
  data: collections.posts
  size: 4
  alias: posts
---

{# 
    size must be set manually,
    and be the same number as env.POSTS_PER_PAGE
#}

{% extends 'layouts/default.njk' %}
{% from "partials/card.njk" import card %}

{% block content %}
    <main id="site-main" class="site-main outer">
        <div class="inner">
            <section class="post-feed">
                {% for post in posts %}
                    {{ card(post) }}
                {% endfor %}
            </section>
            {% include "partials/pagination.njk" %}
        </div>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const readMoreBtn = document.getElementById('readMoreBtn');
            const postDates = [...document.querySelectorAll('.post-card-meta > .meta-content > time.meta-item')];
            
            // Load dayjs plugins and set locale
            dayjs.extend(dayjs_plugin_localizedFormat);
            dayjs.extend(dayjs_plugin_relativeTime);
            dayjs.locale(`{{ site.lang }}`);

            postDates.forEach(date => {
                const dateStr = date.getAttribute('datetime');

                // Display time ago date
                date.innerHTML = dayjs().to(dayjs(dateStr));
            });
        });
    </script>
{% endblock%}
